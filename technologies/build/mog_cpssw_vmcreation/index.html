<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="AI Bots Create, Deploy & Execute Automation(s) using Cognitive Conversation(s) and help Enterprise SRE & SME' scale new business requirements while keeping the overall resource cost low"><meta name=author content="Sridhar P Naidu"><link href=https://extreme-spartan.github.io/cognitive-automation/technologies/build/mog_cpssw_vmcreation/ rel=canonical><link rel=icon href=../../../assets/favicon.png><meta name=generator content="mkdocs-1.4.3, mkdocs-material-8.3.4"><title>Getting started - ExtremeSpartan Cognitive Industries Private Limited - Deploy Automation as a Service</title><link rel=stylesheet href=../../../assets/stylesheets/main.4a0965b7.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link rel=stylesheet href=../../../overrides/assets/stylesheets/main.82a244a8.min.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#41-pre-requisites class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> </div> </aside> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="ExtremeSpartan Cognitive Industries Private Limited - Deploy Automation as a Service" class="md-header__button md-logo" aria-label="ExtremeSpartan Cognitive Industries Private Limited - Deploy Automation as a Service" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"> <!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--> <path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/> </svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ExtremeSpartan Cognitive Industries Private Limited - Deploy Automation as a Service </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Getting started </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=violet data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../introduction/ class=md-tabs__link> Executive Summary </a> </li> <li class=md-tabs__item> <a href=../../../service-offerings/ class=md-tabs__link> Cognitive AI Automation as a Service Offerings </a> </li> <li class=md-tabs__item> <a href=../../../sre/overview/ class=md-tabs__link> SRE </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="ExtremeSpartan Cognitive Industries Private Limited - Deploy Automation as a Service" class="md-nav__button md-logo" aria-label="ExtremeSpartan Cognitive Industries Private Limited - Deploy Automation as a Service" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"> <!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--> <path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/> </svg> </a> ExtremeSpartan Cognitive Industries Private Limited - Deploy Automation as a Service </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Executive Summary <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Executive Summary" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Executive Summary </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../introduction/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../industrywise-overview/ class=md-nav__link> Industrywsie Overview </a> </li> <li class=md-nav__item> <a href=../../../ai-applications/ class=md-nav__link> AI Application Abilities </a> </li> <li class=md-nav__item> <a href=../../../business-use-cases/ class=md-nav__link> Business Use Cases </a> </li> <li class=md-nav__item> <a href=../../../benefits-of-ai-implementation/ class=md-nav__link> Benefits of AI Implementation </a> </li> <li class=md-nav__item> <a href=../../../case-studies/ class=md-nav__link> Case Studies </a> </li> <li class=md-nav__item> <a href=../../../implementation-strategy/ class=md-nav__link> Implementation Strategy </a> </li> <li class=md-nav__item> <a href=../../../roi-and-cost-analysis/ class=md-nav__link> ROI and Cost Analysis </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../service-offerings/ class=md-nav__link> Cognitive AI Automation as a Service Offerings </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> SRE <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=SRE data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> SRE </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../sre/overview/ class=md-nav__link> Overview and Status </a> </li> <li class=md-nav__item> <a href=../../../sre/pag/ class=md-nav__link> Processes & Guidelines </a> </li> <li class=md-nav__item> <a href=../../../key-trainings-for-squads.md class=md-nav__link> Key Trainings for Squads </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> Real vs Cognitive Automated Roles <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Real vs Cognitive Automated Roles" data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Real vs Cognitive Automated Roles </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../botalogue/real_pm.md class=md-nav__link> Project Manager </a> </li> <li class=md-nav__item> <a href=../../../botalogue/cognitive_pm.md class=md-nav__link> Cognitive PM </a> </li> <li class=md-nav__item> <a href=../../../botalogue/real_sam.md class=md-nav__link> Service Availability Manager </a> </li> <li class=md-nav__item> <a href=../../../botalogue/cognitive_sam.md class=md-nav__link> Cognitive SAM </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#41-pre-requisites class=md-nav__link> 4.1 Pre-requisites </a> </li> <li class=md-nav__item> <a href=#42-access-to-3m-tooling class=md-nav__link> 4.2 Access to 3M tooling </a> </li> <li class=md-nav__item> <a href=#43-detailed-procedure class=md-nav__link> 4.3 Detailed procedure </a> <nav class=md-nav aria-label="4.3 Detailed procedure"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#431-create-vmcg-in-the-bmls class=md-nav__link> 4.3.1 Create VMCG in the BMLS </a> </li> <li class=md-nav__item> <a href=#432-create-volumes-in-the-bmls-on-internal-storage class=md-nav__link> 4.3.2 Create volumes in the BMLS on internal storage </a> </li> <li class=md-nav__item> <a href=#433-create-volumes-in-the-bmls-on-in-external-storage class=md-nav__link> 4.3.3 Create volumes in the BMLS on in External Storage </a> </li> <li class=md-nav__item> <a href=#434-create-external-application-access-in-the-bmls-for-the-pas-to-be-created class=md-nav__link> 4.3.4 Create External Application Access in the BMLS for the PAS to be created. </a> </li> <li class=md-nav__item> <a href=#435-create-a-pas-vm class=md-nav__link> 4.3.5 Create a PAS VM </a> </li> <li class=md-nav__item> <a href=#436-configure-networks-for-the-new-pas-vm class=md-nav__link> 4.3.6 Configure networks for the new PAS VM </a> </li> <li class=md-nav__item> <a href=#437-vmcg-with-more-than-one-compute-node class=md-nav__link> 4.3.7 VMCG with more than one compute node </a> </li> <li class=md-nav__item> <a href=#438-pas-basic-configuration class=md-nav__link> 4.3.8 PAS basic configuration </a> </li> <li class=md-nav__item> <a href=#439-update-environments-database-in-3m-tooling class=md-nav__link> 4.3.9 Update environments database in 3M tooling. </a> </li> <li class=md-nav__item> <a href=#4310-ldaps-and-security-configuration class=md-nav__link> 4.3.10 LDAPs and Security configuration. </a> </li> <li class=md-nav__item> <a href=#4311-specific-users-groups-for-ne class=md-nav__link> 4.3.11 Specific Users Groups for NE </a> </li> <li class=md-nav__item> <a href=#4312-enterprise-userids class=md-nav__link> 4.3.12 Enterprise Userids </a> </li> <li class=md-nav__item> <a href=#4313-setting-the-cpu-ratio-on-vmcg class=md-nav__link> 4.3.13 Setting the CPU ratio on VMCG. </a> </li> <li class=md-nav__item> <a href=#4314-specific-configuration-for-openpaas class=md-nav__link> 4.3.14 Specific configuration for OpenPaaS </a> </li> <li class=md-nav__item> <a href=#4315-update-admin-root-passwords class=md-nav__link> 4.3.15 Update admin &amp; root passwords </a> </li> <li class=md-nav__item> <a href=#4316-validate-installation class=md-nav__link> 4.3.16 Validate Installation </a> </li> <li class=md-nav__item> <a href=#4317-mail-to-security-teams class=md-nav__link> 4.3.17 Mail to Security teams </a> </li> <li class=md-nav__item> <a href=#4318-environment-profile-ip-groups-and-catalog-content class=md-nav__link> 4.3.18 Environment Profile, IP Groups and Catalog Content </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Getting started</h1> <p>This is the detailed procedure, step-by-step guide, to create a new PAS VM.</p> <p>The procedure may evolve depending on the PAS version, so make sure to take the procedure release that is related to your PAS version.</p> <h4 id=41-pre-requisites>4.1 Pre-requisites<a class=headerlink href=#41-pre-requisites title="Permanent link">&para;</a></h4> <p>Configuration parameters you need as input Before you start this procedure, please gather the following parameters: • PAS location (on which BMLS) • PAS Name • PAS IP Address, Netmask and Gateway • PAS management VLAN (VLAN ID) • DNS servers • NTP servers You may have to configure one or several VMCG for the same PAS. So you also need to know for each VMCG: • VMCG Name • Number of Compute Nodes for the VMCG • Storage to be allocated for the VMCG • On which VMCG the PAS must be hosted. </p> <p><strong>When Infrastructure VMCG (INRxx) must be created, use it to host the PAS.</strong></p> <p>Normal values are the following, depending on region:</p> <table> <thead> <tr> <th align=center><strong>Region</strong></th> <th align=center><strong>SEDC</strong></th> <th align=center><strong>NEDC</strong></th> <th align=center><strong>NADC</strong></th> <th align=center><strong>MEDC</strong></th> <th align=center><strong>ATDC</strong></th> </tr> </thead> <tbody> <tr> <td align=center><strong>VLAN</strong></td> <td align=center>2106</td> <td align=center>2106</td> <td align=center>2106</td> <td align=center>2106</td> <td align=center>2106</td> </tr> <tr> <td align=center><strong>Netmask</strong></td> <td align=center>255.255.254.0</td> <td align=center>255.255.254.0</td> <td align=center>255.255.254.0</td> <td align=center>255.255.254.0</td> <td align=center>255.255.254.0</td> </tr> <tr> <td align=center><strong>Gateway</strong></td> <td align=center>10.227.59.254</td> <td align=center>10.241.187.254</td> <td align=center>10.68.115.254</td> <td align=center>10.99.7.254</td> <td align=center>10.99.207.254</td> </tr> <tr> <td align=center><strong>DNS1</strong></td> <td align=center>10.227.89.134</td> <td align=center>10.241.183.130</td> <td align=center>10.227.89.134</td> <td align=center>10.227.89.134</td> <td align=center>10.227.89.134</td> </tr> <tr> <td align=center><strong>DNS2</strong></td> <td align=center>10.241.183.130</td> <td align=center>10.227.89.134</td> <td align=center>10.241.183.130</td> <td align=center>10.241.183.130</td> <td align=center>10.241.183.130</td> </tr> <tr> <td align=center><strong>NTP 1</strong></td> <td align=center>10.227.94.126</td> <td align=center>10.241.180.254</td> <td align=center>10.68.125.254</td> <td align=center>10.99.2.254</td> <td align=center>10.99.129.254</td> </tr> <tr> <td align=center><strong>NTP 2</strong></td> <td align=center>10.227.94.254</td> <td align=center>10.241.181.254</td> <td align=center>10.68.126.254</td> <td align=center>10.99.3.254</td> <td align=center>10.99.130.254</td> </tr> </tbody> </table> <h4 id=42-access-to-3m-tooling>4.2 Access to 3M tooling<a class=headerlink href=#42-access-to-3m-tooling title="Permanent link">&para;</a></h4> <p>Some steps of this procedure require access to 3M tooling (Meta Model Manager). 3M is accessible at <a href=http://10.227.94.138>http://10.227.94.138</a>.</p> <h4 id=43-detailed-procedure>4.3 Detailed procedure<a class=headerlink href=#43-detailed-procedure title="Permanent link">&para;</a></h4> <h5 id=431-create-vmcg-in-the-bmls>4.3.1 Create VMCG in the BMLS<a class=headerlink href=#431-create-vmcg-in-the-bmls title="Permanent link">&para;</a></h5> <p>Connect to the BMLS for the datacenter the PAS is related to:</p> <p><img alt="Enterprise Environment" src=../assets/images/EnterpriseEnv.png> <img alt="Enterprise Environment" src=../assets/images/3mtool1.png></p> <p>Use a login ID with administrator privileges</p> <p><img alt="Login UI" src=../assets/images/loginUI.png></p> <p>Go to Cloud / Cloud Groups</p> <p><img alt="PAS UI" src=../assets/images/pasUI.png></p> <p>Click on the ‘+’ sign next to ‘Cloud Groups’ to create a new Cloud Group</p> <p><img alt=VMCG src=../assets/images/CloudGroup.png> </p> <p>Set the name of the Cloud Group, select ‘Virtual Manager’ as the Cloud Group type and click OK. Open the ‘Compute nodes’ section:</p> <p><img alt="Compute Node" src=../assets/images/ComputeNode.png></p> <p>On the drop-down list, select a free compute node. It will be attached to the VMCG. Repeat this operation to have the right number of compute nodes in the VMCG.</p> <p><img alt="Compute Node" src=../assets/images/ComputeNode1.png></p> <p>Wait until the status for all the Compute Nodes becomes ‘Available’</p> <p><img alt="Compute Node2" src=../assets/images/ComputeNode2.png></p> <p>In case you need to create several VMCG on the same PAS, repeat these steps for each VMCG.</p> <ul> <li><strong>VMCG becomes “Unavailable” with Compute Node “Quiesced” – What to do?</strong> After you add Compute Nodes to several VMCG, the first Compute Node stays “Available” while next Compute Nodes become Quiesced, nevertheless Compute Node you select. So the VMCG state changes from “Available” to “Unavailable” like in those screenshots:</li> </ul> <p><img alt="VMCG BNR08" src=../assets/images/BNR08.png></p> <p>Then, after a few seconds, the two Compute Nodes become “Quiesced”, the VMCG becomes “Unavailable”:</p> <p><img alt="Compute Node Quiesced" src=../assets/images/ComputeNodeQuiesced.png> </p> <p>To resolve this problem, you must reconfigure High Availability on vCenter.</p> <p>Actions:</p> <ul> <li>Get Credentials for Virtual Manager access (menu System, submenu System Settings, choice External Application Access Settings):</li> </ul> <p><img alt="External User" src=../assets/images/ExternalUser.png></p> <ul> <li> <p>Connect on vCenter with those credentials</p> </li> <li> <p>Select the first Compute Node – the one in “Available” state, display the contextual menu and click on “Reconfigure for vSphere HA”:</p> </li> </ul> <p><img alt="Reconfigure of vSphereHA" src=../assets/images/ReconfigureVsphereHA.png></p> <ul> <li>Wait until the process is completed:</li> </ul> <p><img alt="Recent Task" src=../assets/images/vCenterRecentTasks.png></p> <ul> <li>Do the same action on each other Compute Nodes until it’s completed:</li> </ul> <p><img alt="Reconfigure of vSphereHA1" src=../assets/images/ReconfigureVsphereHA1.png></p> <ul> <li>Login on BMLS, on menu Hardware, click on Compute Nodes:</li> </ul> <p><img alt="BMLS HW CN" src=../assets/images/BMLS1.png></p> <ul> <li>For each Compute Node in “Quiesced” state, click on “Start” button:</li> </ul> <p><img alt="Compute Node Quiesced1" src=../assets/images/ComputeNodeQuiesced1.png></p> <ul> <li>Wait until the Compute Node state moves to “Available”:</li> </ul> <p><img alt="Compute Node Available" src=../assets/images/ComputeNodeAvailable.png></p> <ul> <li>When all Compute Nodes are started, check the VMCG becomes “Available”:</li> </ul> <p><img alt="List of CN" src=../assets/images/ComputeNodeList.png></p> <h5 id=432-create-volumes-in-the-bmls-on-internal-storage>4.3.2 Create volumes in the BMLS on internal storage<a class=headerlink href=#432-create-volumes-in-the-bmls-on-internal-storage title="Permanent link">&para;</a></h5> <p><strong>Warning:</strong> Section 4.3.2 only applies for BMLS internal storage. In case, you are asked to use external storage, please refer to section 4.3.3 </p> <ul> <li> <p><strong>Create Volume Group for PAS</strong></p> <p>Go to Cloud / Volume Groups <img alt="Volume Group1" src=../assets/images/VolumeGroup1.png></p> </li> </ul> <p>Click on ‘Create New’ <img alt="Volume Group2" src=../assets/images/VolumeGroup2.png></p> <p>Set the PAS’ hostname as name of the volume group with a short description and select the VMCG name from the drop-down list for ‘In Cloud Group’.</p> <p><strong>Rule: When the PAS contains INRxx Cloud Group, select it.</strong></p> <p>Open the Volumes section to add new volumes to this Volume Group <img alt=Volume1 src=../assets/images/Volume1.png></p> <ul> <li>Create CACHE volume Click the ‘Add Volume’ button to add the CACHE datastore <img alt="Create Cache Volume" src=../assets/images/CreateCacheVolume.png></li> </ul> <p>Set <hostname>_CACHE_0001 as the volume’s Name, Block VMFS as type. In the “In Cloud Group” section, make sure you check the name of ALL the VMCG that will be managed by your PAS. If one VMCG is not checked, this VMCG won’t be usable by the PAS. <strong>Sizing Rule:</strong> Specify 500 GB. Click OK.</p> <ul> <li>Create PAS VM volume</li> </ul> <p>Create another volume with <hostname>_VMPAS_0001 as the volume’s name, Block VMFS as type, ensure that the name of the VMCG that is hosting the PAS is checked in the ‘In Cloud Group’ list. <strong>Sizing Rule:</strong> Specify 1 TB. Click OK. <img alt="Create PAS VM Volume" src=../assets/images/CreatePASVMVolume.png></p> <p>Once this volume is created, click on the volume’s link on the Volume Group page. This will lead to the Cloud &gt; Volumes page with details of the VMPAS volume.</p> <p><img alt="PAS Volume Page" src=../assets/images/VolumePage.png></p> <p>Look for ‘Datastore name’. Copy the ‘datastore name’ and save it for future use.</p> <ul> <li> <p>Create Volume Groups and Volumes for VMCG For each VMCG, check the change request/spec to see if additional volume is required for the VMCG. If yes, go back to the ‘Volume Groups’ page and create a volume group with name: <pashostname><em><vmcgname> and assign to the VMCG. Then create a “Block VMFS” volume with name “<pashostname></em><vmcgname>_VMFS_000x” and appropriate size. Attach this volume to its VMCG only.</p> </li> <li> <p>Assign volumes to the PAS With PureApplication 2.2.5.x, you need to set the “Associate System” name to each volume to make them visible to the PAS. Go to “Cloud -&gt; Volumes” on the BMLS. On EACH volume you have created, including CACHE and PAS VM volumes, change the “Associate System” field with the short hostname of the PAS you’re about to create. Warning: be careful of the case (use only capital letters)</p> </li> </ul> <p><img alt="BMLS Volume Page" src=../assets/images/BMLSvolumePage.png> </p> <ul> <li>Case of “GOLD” VMCG – Replication Volumes</li> </ul> <p>In case the VMCG you’re adding is from “Gold” class (i.e. its name starts with a “G”), you need to process the following additional steps. In the following steps, we will designate <a class="magiclink magiclink-github magiclink-issue" href=https://github.com/squidfunk-sridhar/BMLS/issues/1 title="GitHub Issue: squidfunk-sridhar/BMLS #1">BMLS#1</a> as the BMLS where you have created the VMCG and <a class="magiclink magiclink-github magiclink-issue" href=https://github.com/squidfunk-sridhar/BMLS/issues/2 title="GitHub Issue: squidfunk-sridhar/BMLS #2">BMLS#2</a> as the BMLS on which storage is replicated.</p> <p>Storage is replicated between couples of BMLS. For these steps, you need to connect to the BMLS that is paired with the one you are creating the VMCG on. If you don’t know which BMLS is replicated with the BMLS you’re working on, go to “System -&gt; Bock Storage replication”, then select the replication profile on the left and expand the “details” section. The IP address of the other BMLS is the “Peer management location”. 1) On <a class="magiclink magiclink-github magiclink-issue" href=https://github.com/squidfunk-sridhar/BMLS/issues/2 title="GitHub Issue: squidfunk-sridhar/BMLS #2">BMLS#2</a>, create a volume group called “DR_<pashostname><em><vmcgname>”. Do not assign any cloud group to it. 2) In this volume group, create new volumes. For each volume you have created on <a class="magiclink magiclink-github magiclink-issue" href=https://github.com/squidfunk-sridhar/BMLS/issues/1 title="GitHub Issue: squidfunk-sridhar/BMLS #1">BMLS#1</a>, you need to create a volume on <a class="magiclink magiclink-github magiclink-issue" href=https://github.com/squidfunk-sridhar/BMLS/issues/2 title="GitHub Issue: squidfunk-sridhar/BMLS #2">BMLS#2</a>. The name of the volume on <a class="magiclink magiclink-github magiclink-issue" href=https://github.com/squidfunk-sridhar/BMLS/issues/2 title="GitHub Issue: squidfunk-sridhar/BMLS #2">BMLS#2</a> is the same as the one on <a class="magiclink magiclink-github magiclink-issue" href=https://github.com/squidfunk-sridhar/BMLS/issues/1 title="GitHub Issue: squidfunk-sridhar/BMLS #1">BMLS#1</a>, prefixed by “DR</em>”. The size of the volumes must be identical on both BMLS. Type is “Block VMFS”. Do not assign volumes on <a class="magiclink magiclink-github magiclink-issue" href=https://github.com/squidfunk-sridhar/BMLS/issues/2 title="GitHub Issue: squidfunk-sridhar/BMLS #2">BMLS#2</a> to any cloud group.</p> <p>To summarize: <img alt="BMLS1 vs BMLS2" src=../assets/images/bmls1Vsbmls2.png></p> <p>Volume group and volume assigned to Gold VMCG No cloud group assignment</p> <p>3) On <a class="magiclink magiclink-github magiclink-issue" href=https://github.com/squidfunk-sridhar/BMLS/issues/1 title="GitHub Issue: squidfunk-sridhar/BMLS #1">BMLS#1</a>, go to “System -&gt; Block Storage replication” and select the replication profile on the left.</p> <p><img alt=BMLS1 src=../assets/images/1stBMLS.png> </p> <p>4) Click the “Add Volumes” button.</p> <p>5) In the “Local volume” list, select one volume you have created and select its corresponding volume in “remote volume” list (it’s populated depending on local volume size). Make sure replication type is “synchronous”. Click “Add”.</p> <p><img alt="Add volume for replication" src=../assets/images/AddVolumeForReplication.png></p> <p>6) Repeat steps 4 and 5 for each volume.</p> <p>7) On <a class="magiclink magiclink-github magiclink-issue" href=https://github.com/squidfunk-sridhar/BMLS/issues/2 title="GitHub Issue: squidfunk-sridhar/BMLS #2">BMLS#2</a>, go to “System -&gt; Block Storage replication” and select the replication profile on the left. Accept replication for all volumes by clicking on <strong>Accept</strong> button.</p> <p><img alt="Block storage replication profile" src=../assets/images/BlockStorageRepicationProfile.png></p> <h5 id=433-create-volumes-in-the-bmls-on-in-external-storage>4.3.3 Create volumes in the BMLS on in External Storage<a class=headerlink href=#433-create-volumes-in-the-bmls-on-in-external-storage title="Permanent link">&para;</a></h5> <p><strong>Warning:</strong> Section 4.3.3 only applies for storage external to BMLS. In case, you are asked to use BMLS internal storage, please refer to section 4.3.2 This document is assuming that the BMLS are already connected to the external storage and properly configured to access it.</p> <p>Main differences when using external storage, compared to internal storage:</p> <p>• There’s no volume group defined on BMLS • Volumes are created by storage administrators on external storage and discovered by the BMLS. • By default, the external volumes are seen by the BMLS as “Block” storage, instead of “Block VMFS”, requiring additional steps to format them as “Block VMFS” • Block storage replication is not managed by the BMLS • Naming convention is different both at BMLS and PAS levels</p> <ul> <li>Naming conventions for external volumes</li> </ul> <p>The names of the volumes are based on the hostname of the PAS and the name of the VMCG that will use these volumes.</p> <p><img alt="ES Naming Convention" src=../assets/images/ESNamingConvention.png></p> <p>In case of Gold VMCG, storage administrators need to create 2 consistency groups that will contain all the replicated external volumes on each side. Due to a limitation to 15 characters on SVC, we will use the PAS hostname as name for these 2 consistency groups. In our example, name of the consistency groups will be “SECLPRVGN3PAS15”.</p> <ul> <li>Creation of new volumes on external storage</li> </ul> <p>The creation of new volumes on the external storage is performed by the storage administrators. They need the following details in order to create a new volume: • Name of the new volume (see §2.3.1 “naming conventions for external volumes”); • Size of the new volume; • Name of the BMLS that will use the new volume; • If the volume is replicated (i.e. targeted for Gold workload), provide the same information for the “DR” volume.</p> <p><strong><em>Replication must NOT be enabled before the volumes are fully configured on both BMLS</em></strong></p> <p>To summarize, you need to ask the storage administrators to create the volumes listed on the table below (please adapt): <img alt="ES Create Volumes" src=../assets/images/CreateESVolumes.png></p> <ul> <li>Volumes configuration in BMLS</li> </ul> <p>Follow this procedure for EACH volume, including the “DR_” volumes (on peer BMLS). Login the BMLS and go to the “Hardware -&gt; Storage Devices” menu. You should see in the left column a device called “External Storage Node”. Select it and expand the “Volumes” section. If you can’t find the volume(s) you have requested, click on the “Discover” icon on top right of the screen (“eye” icon)</p> <p><img alt="ES Volume Discover" src=../assets/images/ESVolumeDiscover.png></p> <p>This is launching a discovery job. Wait for the job to complete (see “System -&gt; Job Queue” menu).</p> <p><img alt="ES Launching Discovery Job1" src=../assets/images/ESLaunchingDiscoveryJob1.png> <img alt="ES Launching Discovery Job2" src=../assets/images/ESLaunchingDiscoveryJob2.png> </p> <p>Once the job is completed, refresh the page and you should see the new volumes:</p> <p><img alt="ES Launching Discovery Job3" src=../assets/images/ESLaunchingDiscoveryJob3.png></p> <p><strong>Warning:</strong> Since the external SVC is shared by several BMLS, you could see volumes that are not supposed to be used by the BMLS you’re working on. This is normal and works as designed. Be careful in selecting the right volumes.</p> <p>Click on the name of the volume to directly go the “Cloud Volumes” page:</p> <p>image</p> <p>As you can see, the type of the volume is, by default, set to “Block”. We need to change this to “Block VMFS” but, with external volumes, this option is not available by default. We first need to map this volume to a cloud group (or VMCG). Click on the “Edit” link in from of the “In Cloud Group” section and select the VMCG you want to attach the volume to. If the volume is a CACHE volume and needs to be mapped to several VMCG, select one of these VMCG for now, you’ll be able to map the volume to the other VMCG later. <strong>In case of “DR_” volumes (for Gold VMCG),</strong> these volumes are not supposed to be mapped to a VMCG in a normal situation, but this is required by the procedure. We will temporarily map these volumes to a VMCG and unmap them at the end. You can temporarily map these volumes to any VMCG, even if it’s the VMCG that they should be mapped to in case of DR.</p> <p>Image</p> <p>image</p> <p>If the job fails on “DR_” volume, contact the storage administrator to confirm that the volume is not yet the destination of a replication.</p> <p>Go back to your volume (or refresh its page). Now you can edit the type and choose “Block VMFS”. Also check the “Format” checkbox and click “Save”:</p> <p>image</p> <p>image</p> <p>Wait for the “volume update” job to complete.</p> <p>image</p> <p>Go back to the volume page or refresh it. Note that the “datastore name” should be the same as the volume name and the section “In Cloud Group” should have changed to this:</p> <p>image</p> <p>If the volume you are working on is a “CACHE” volume and the corresponding PAS is managing several VMCG, you need to attach this volume to all the VMCG this PAS is managing. To do so, click on the “Edit” button in section “In Cloud Group” (see previous screenshot) and select all the VMCG that needs to be attached. Wait for the job to complete. Edit the “Associate System” attribute and set it with the short hostname of the PAS that will use this volume. The hostname must be in capital letters like on the screenshot below:</p> <p>image </p> <p>Wait for the “storage volume updated” job to complete.</p> <p>image</p> <ul> <li>Case of “GOLD” VMCG</li> </ul> <p>You should have followed the same procedure (see §2.3.3) for “DR_” volumes on the peer BMLS and the “DR_” volumes should have been mapped to a VMCG (it doesn’t care which one). Once completed, unmap the “DR_” volumes from any VMCG (the section “In Cloud Group” must be empty) and wait for the “volume update” job to complete.</p> <p>image</p> <p>Once you have configured all the “DR_” volumes on the BMLS, ask the storage administrators to enable replication from the non-DR to the DR volumes, providing them the following table:</p> <p>image</p> <h5 id=434-create-external-application-access-in-the-bmls-for-the-pas-to-be-created>4.3.4 Create External Application Access in the BMLS for the PAS to be created.<a class=headerlink href=#434-create-external-application-access-in-the-bmls-for-the-pas-to-be-created title="Permanent link">&para;</a></h5> <p>Go to System / External Application Access Settings:</p> <p>image</p> <ul> <li>Administrator group Click on the ‘Create’ button to create new credentials for the new VMCG image</li> </ul> <p>Set ‘<pas name> - Administrators’ as the credential’s name. Set ‘Cloud Groups’ as Access Scope. Leave ‘Virtual Manager Privilege Set’ with default value. Ensure to check the names of all the VMCG managed by the PAS in the provided ‘Cloud Group’ list and ensure the boxes ‘Grant Compute Nodes Access’ and ‘Grant Storage Access’ are checked</p> <p>image</p> <ul> <li>Compute Node does not show the IP – What to do? If the ‘IP Address’ of a Compute Node does not show on the External Users dialog box (as per following screenshot) follow the steps below. </li> </ul> <p>image</p> <p>1 - Go to Cloud / IP Groups and select the MKS Console P Group</p> <p>image</p> <p>2 - Look at the IP Address section and find a free IP Address to attach the compute node to.</p> <p>image</p> <p>3 - Select the compute node to attach from the drop-down list. Having noticed the location of the compute node before helps looking for the right compute node in the list. </p> <p>image</p> <p>4 - Confirm your choice by clicking ‘Attach’.</p> <p>image</p> <p>5 - Validate the operation by looking at the External Users dialog box and check that the IP Addresses shows up there. Notice that the MKS Console IP Group ‘Attach’ operation can be done before the external user credentials are generated.</p> <h5 id=435-create-a-pas-vm>4.3.5 Create a PAS VM<a class=headerlink href=#435-create-a-pas-vm title="Permanent link">&para;</a></h5> <p>We are going to deploy the PASWE v2.3.0.1 using the OVA image. You need to login to the Jump server which is the closest to the BMLS on which you need to create a PAS, e.g. if you need to create a PAS on a BMLS in Balsberg, you should connect to the Jump Server in Balsberg. If you face some issues doing so, try the other Jump server of the given region, in the other datacenter (Paulstrasse in our example) but do not change for another region. The same rule applies to the RTEM server you’ll work with. It should be the RTEM located in the same datacenter or, in worst case, in the other datacenter of the same region. You can connect to the “local” Jump Server directly from CyberArk or by running a new Remote Desktop connection from your usual Jump Server (in any region).</p> <table> <thead> <tr> <th><strong>Region</strong></th> <th><strong>Location</strong></th> <th><strong>Jump Server</strong></th> <th><strong>RTEM</strong></th> </tr> </thead> <tbody> <tr> <td>SE</td> <td>Clichy</td> <td>10.227.94.23</td> <td>10.227.89.135</td> </tr> <tr> <td>SE</td> <td>Lognes</td> <td>10.227.94.138, 10.227.94.150</td> <td>10.227.89.136</td> </tr> <tr> <td>NE</td> <td>Koln</td> <td>10.241.180.33</td> <td>10.241.183.137</td> </tr> <tr> <td>NE</td> <td>Leverkusen</td> <td>10.241.181.33</td> <td>10.241.183.138</td> </tr> <tr> <td>NA</td> <td>Suwanee</td> <td>10.168.125.33</td> <td>10.68.124.135</td> </tr> <tr> <td>NA</td> <td>Atlanta</td> <td>10.168.126.33</td> <td>10.68.124.136</td> </tr> <tr> <td>ME</td> <td>Paulstrasse</td> <td>10.99.2.33</td> <td>10.99.5.135</td> </tr> <tr> <td>ME</td> <td>Balsberg</td> <td>10.99.3.33</td> <td>10.99.5.136</td> </tr> <tr> <td>AS</td> <td>Singtel</td> <td>10.99.129.33</td> <td>10.99.132.135</td> </tr> <tr> <td>AS</td> <td>Keppel</td> <td>10.99.130.33</td> <td>10.99.132.136</td> </tr> </tbody> </table> <p>Login using Remote Desktop Connection to the local Jump Server form CyberArk or from your usual Jump Server. Once you logged into the local Jump Server, mount the “share” directory from RTEM server on the local regional server. You can do this in 2 different ways:</p> <ul> <li>Option 1: you can open the “Run” window and open "\LOCALRTEMIP\share”</li> </ul> <p>image</p> <ul> <li>Option 2: You can open a Windows Explorer, click on “Map network drive” in the “Computer” menu. Enter "\LOCALRTEMIP\share” as Folder</li> </ul> <p>image</p> <p>The PAS OVA image is under the below directory. \LOCALRTEMIP\share\receive\secl\all\productinstallpackages\softw are\pas\install\PAS_Install\VM_PAS-2301-v1 Except for SECL : \10.227.89.135\share\send\all\productinstallpackages\software\pa s\install\PAS_Install\VM_PAS-2301-v1 If the BMLS is running version 2.2.6.0 or higher, you need to use the vSphere Web Client for the next steps because the fat client does not work anymore. If the BMLS is running version 2.2.5.x, you can use either the vSphere Web Client or the vSphere fat client.</p> <ol> <li><strong>Using vSphere power cli in RTEM (required for BMLS 2.2.6.0 or higher)</strong></li> </ol> <p>For the PAS Image in V2301 we are going to use command line tool to create the PAS. Follow the below steps carefully. Login to RTEM and run the following commands Refer 2.4 Chapter to get the RTEM IP. Details. For example, login to 10.227.89.135 using your AD ID (e.g. <a href=mailto:myname@cloudfabric.intrsre>&#109;&#121;&#110;&#97;&#109;&#101;&#64;&#99;&#108;&#111;&#117;&#100;&#102;&#97;&#98;&#114;&#105;&#99;&#46;&#105;&#110;&#116;&#114;&#115;&#114;&#101;</a>) and then</p> <p>a) Run “pwsh”</p> <p>image</p> <p>Then Set-PowerCLIConfiguration -ProxyPolicy NoProxy -Scope User - InvalidCertificateAction Ignore -DefaultVIServerMode Single It will prompt to Confirm Press “Y”</p> <p>image</p> <p>Now connect to the vCenter with the following command. Connect-VIServer -Server 'vcenter.fullfqdn' -Protocol https -User 'username' -Password '***********' &gt;&gt; Connect the the Vcenter For example: Connect-VIServer -Server 'SELOGRVGN3VMW03.cloudfabric.infratest' - Protocol https -User '<a href=mailto:app_6ce279d5@vsphere.local>&#97;&#112;&#112;&#95;&#54;&#99;&#101;&#50;&#55;&#57;&#100;&#53;&#64;&#118;&#115;&#112;&#104;&#101;&#114;&#101;&#46;&#108;&#111;&#99;&#97;&#108;</a>' -Password 'XXXXXX’</p> <p>image</p> <p>Note: Open Command prompt from the Windows RDP and run nslookup command to get the FQDN of the vCenter.</p> <p>Now gather all the information before running the below command. <strong>'ESXI_where_should_be_the_vm – Ip address of the compute node where the PAS VM will be created.</strong> <strong>Source should be the path where the OVA file is present</strong> <strong>Datastore name – You can find this from CPS Cloud Volume</strong> <strong>Look for the Datastore name</strong></p> <p>image</p> <p>Get-VMHost 'ESXI_where_should_be_the_vm' | Import-vApp -Source '/infratest/share/.../vm.ova' -Datastore 'datastore_name' -Name 'final_vm_name' -Force</p> <p>For example:</p> <p>Get-VMHost '11.227.56.8' | Import-vApp -Source '/root/infratest/share/software/pas/PAS2301/PAS2301_V2.ova' - Datastore 'p_147d25a7-137a-4721-b91d-ca3543d0a59c' -Name 'PASVM2301' -Force</p> <p>It would approximately take 2 hours to complete and after completing you will output as shown in the screenshot below.</p> <p>image</p> <p>image</p> <p><strong>Once the VM is created in vCenter make sure you disconnect</strong> Disconnect-VIServer -Server 'SELOGRVGN3VMW03.cloudfabric.infratest'</p> <p>image</p> <p>Now go to vCenter. Edit the VM settings you created, click the “New device…” button at the bottom of the Virtual Hardware tab and add a Network card.</p> <p>image</p> <p>On the “New Network” card, select the drop list and choose “show more networks”.</p> <p>Then select the right VLAN: you must choose the VLAN ID on which the PAS will be (usually 2106, see information provided by project management or, by default, table in chapter §1.1. Click OK.</p> <p>Note that, on the 2 following screenshots, VLAN 2006 is selected instead of VLAN 2106. This is because the screenshot was taken in Infratest, using different VLANs.</p> <p>image</p> <p>Ensure that the ‘Connect at Power On’ option is checked, then OK.</p> <p>image</p> <p>You also need to change some CPU settings on the PAS VM. Expand the “CPU” section in Virtual Hardware and change the following settings: • CPU Reservation: 4000 MHz • CPU Limit: Unlimited MHz • CPU Shares: Custom 256000</p> <p>image</p> <p>Click OK to validate. Now your VM is good to be powered on.</p> <ol> <li><strong>Using vSphere fat client (for BMLS up to version 2.2.5.3)</strong> To create the PAS virtual machine, the vCenter fat client makes it easier than the web client. From the local Jump Server, open the vCenter fat client using the credentials for the Virtual Manager</li> </ol> <p>image</p> <p>Notice that right after clicking the ‘Login’ button, the following dialog box may appear asking you to confirm you want to access this vCenter server with that administrative client.</p> <p>image </p> <p>Click the check box “Install this certificate and do not display any security warnings” then click on “Ignore” button. If you fail to do so within a short timeframe, the fat client will just close and you will have to reconnect.</p> <p>image</p> <p>Go to Hosts and Clusters and deploy the topology tree up to the compute node</p> <p>image</p> <p>Now Navigate to File Deploy OVF template</p> <p>image</p> <p>Click “Next” button.</p> <p>OVF template is found:</p> <p>image</p> <p>Click “Next” button.</p> <p>image</p> <p>Enter the PAS Name and Select the Inventory Location. Rule: When the PAS contains INRxx Cloud Group, select it.</p> <p>Select the datastore to receive the PAS VM, the one you named “VMPAS” with 1 TB size:</p> <p>imgage</p> <p>Click on “Next” button. Select the Disk Format “Thick Provision Eager Zeroed”:</p> <p>image </p> <p>Click “Next” button.</p> <p>Click on “Finish” button to deploy the PAS VM:</p> <p>image</p> <p>image </p> <p>image </p> <p>This operation takes 2 hours and maybe more.</p> <p>image </p> <p><strong>NOTE –</strong> Once the deployment is complete. You can disconnect from the local regional Jump server and continue the below steps from SE Jump server.</p> <p>Now Edit the VM settings you created, click the “Add…” button on the Hardware tab and add a Network card (Ethernet adapter).</p> <p>image</p> <p>image</p> <p>image</p> <p>image </p> <p>Select « VMXNET 3 » as adapter type. Select the right VLAN for ‘Network label’: you must choose the VLAN ID on which the PAS will be (usually 2106, see information provided by project management or, by default, table in chapter §1.1. Ensure the adapter is ‘VMXNET 3’ and that the ‘Connect at Power On’ option is checked, then Next You also need to change some CPU settings on the PAS VM. On the Virtual Machine Properties, click on the “Resources” tab and select the “CPU” settings. Change the following settings: • CPU Shares: Custom 256000 • CPU Reservation: 4000 MHz • CPU Limit: Unlimited</p> <p>image </p> <p>Click OK. Now your VM is good to be powered on.</p> <h5 id=436-configure-networks-for-the-new-pas-vm>4.3.6 Configure networks for the new PAS VM<a class=headerlink href=#436-configure-networks-for-the-new-pas-vm title="Permanent link">&para;</a></h5> <h5 id=437-vmcg-with-more-than-one-compute-node>4.3.7 VMCG with more than one compute node<a class=headerlink href=#437-vmcg-with-more-than-one-compute-node title="Permanent link">&para;</a></h5> <ul> <li>Add compute nodes at BMLS level</li> <li>Configure VMCG at vCenter level</li> </ul> <h5 id=438-pas-basic-configuration>4.3.8 PAS basic configuration<a class=headerlink href=#438-pas-basic-configuration title="Permanent link">&para;</a></h5> <p>Open the PSM UI on the URL: https://<pas-ip-address> and log on using admin / passw0rd as credentials</p> <h5 id=439-update-environments-database-in-3m-tooling>4.3.9 Update environments database in 3M tooling.<a class=headerlink href=#439-update-environments-database-in-3m-tooling title="Permanent link">&para;</a></h5> <h5 id=4310-ldaps-and-security-configuration>4.3.10 LDAPs and Security configuration.<a class=headerlink href=#4310-ldaps-and-security-configuration title="Permanent link">&para;</a></h5> <ul> <li>LDAPS configuration</li> </ul> <h5 id=4311-specific-users-groups-for-ne>4.3.11 Specific Users Groups for NE<a class=headerlink href=#4311-specific-users-groups-for-ne title="Permanent link">&para;</a></h5> <p>For NE PAS, you need to remove the default group “BMLS-PureApp-Administrators” and add the two following groups.</p> <ul> <li>BMLS-PureApp-SuperAdminNE</li> <li>BMLS-PureApp-AdministratorsNE</li> </ul> <h5 id=4312-enterprise-userids>4.3.12 Enterprise Userids<a class=headerlink href=#4312-enterprise-userids title="Permanent link">&para;</a></h5> <p>Depending on type of PAS (PréProduction vs Production) and Regions, some Enterprise userids must be defined, with specific authorizations.</p> <ul> <li>Authorizations for all Enterprise userids</li> <li>On all environments</li> <li>On all PreProduction environments</li> <li>On AS Production environments</li> <li>On ME Production environments</li> <li>On ME Production and PreProduction environments</li> <li>On NA environments</li> <li>On NE PreProduction environments</li> <li>On NE environments</li> <li>On SE environments</li> </ul> <h5 id=4313-setting-the-cpu-ratio-on-vmcg>4.3.13 Setting the CPU ratio on VMCG.<a class=headerlink href=#4313-setting-the-cpu-ratio-on-vmcg title="Permanent link">&para;</a></h5> <p>The CPU ratio of each VMCG depends on its class. This CPU ratio is contractually defined. This CPU ratio must be set before any deployment is performed on the VMCG. If VMs are deployed (even if they’re stopped), we cannot change the CPU ratio anymore. In this case, you would have to delete all the VMs on this VMCG before being able to change the CPU ratio.</p> <p>The CPU ratio of each VMCG depends on its class. This CPU ratio is contractually defined. This CPU ratio must be set before any deployment is performed on the VMCG. If VMs are deployed (even if they’re stopped), we cannot change the CPU ratio anymore. In this case, you would have to delete all the VMs on this VMCG before being able to change the CPU ratio.</p> <p>table</p> <p>The 3M application provides a tool that can tell you what the expected CPU ratio on each VMCG is, compare it to the current one and, depending on the case, can fix the issue for you without writing any single command.</p> <p>To use 3M, connect to 3M tooling at <a href=http://10.227.94.138>http://10.227.94.138</a> and select “Fix CPU Ratio on PAS” in the Applications menu.</p> <p>Expand the Enterprise Cloud to find your PAS. Click on the PAS. The tool will gather the information from the PAS and list the VMCG. Select you VMCG.</p> <p>Depending on the different situations, the tool will tell you if the CPU ratio must be fixed or not and if it can do it for you.</p> <p>image</p> <p>Click the button to change the CPU ratio and check in the PAS GUI. For PAS 2.2.5.3, no more action is required.</p> <p>For PAS 2.3.0.1 and 2.3.1.1, if there are VMs on the VMCG, these VMs must be stopped, then stored and then started to force the PAS to calculate the new allocation. Normally, your VMCG should be empty or only contains the PAS VM so no more action is required. More information about changing CPU ratio is available in document “Modifying CPU ratio on a VMCG” available at <a href=https://ibm.box.com/s/frtpag7uuxylj1odpypquyipws7cl7kw>https://ibm.box.com/s/frtpag7uuxylj1odpypquyipws7cl7kw</a></p> <p>1) 2)</p> <p>image </p> <p>3) 4)</p> <p>image</p> <p>5) 6)</p> <p>image</p> <p>7) 8) 9) 10) 11) 12)</p> <h5 id=4314-specific-configuration-for-openpaas>4.3.14 Specific configuration for OpenPaaS<a class=headerlink href=#4314-specific-configuration-for-openpaas title="Permanent link">&para;</a></h5> <p>PAS that are targeted for “OpenPaaS” require additional steps. OpenPaaS environments require a new datastore on vCenter that is not usable by the PAS, i.e. PAS should not be able to deploy virtual machines on this datastore. So, if the PAS you’re building is for OpenPaaS, you need to run the following steps.</p> <p><strong>- Additional datastore for OpenPaaS</strong></p> <p>On BMLS, go to Cloud / Volume Groups and select the cloud group that you have created for the VMCG (named <pashostname><em><vmcgname>) in section 2.2.4. Add a new volume to this volume group: • Name: <pashostname></em><vmcgname>_OPENPAAS_000x • Description: “Datastore for OpenPAAS” • Type: Block VMFS • In Cloud Group: attach to the VMCG • Size: to be provided by capacity management/project manager</p> <p>image</p> <p>Once created, click on the name of the volume.</p> <p>image</p> <p>Copy the datastore name, datastore UUID and LUN identifier. You need to provide this information to project management for them to send to Enterprise OpenPaaS team. <strong>Important point: do NOT set the “Associate System” field. Leave it empty on purpose.</strong> Because the “associate system” field is empty, PAS will not discover it and will not deploy any VM on it, letting Enterprise populate this datastore at their convenience.</p> <p><strong>- Additional vCenter credentials</strong> On BMLS, go to System / System Settings and expand the “External Application Access Settings” section.</p> <p>Click the “create” button and fill the popup window as following: • Name: <pas name> - OpenPaaS • Access scope: Cloud Groups • Cloud Group: select the appropriate VMCG • Virtual Manager Set: “OpenShift Container Platform” • Grant Compute Nodes Access: yes • Grant Storage Access: yes</p> <p>image</p> <p>Click OK. Once the credentials are created, click the details icon in the Actions column. Then click the “Show passwords”. You need to provide the credentials to to project management for them to send to Enterprise OpenPaaS team</p> <p>image</p> <p><strong>- Add Enterprise DNS to PAS System Settings</strong> On PAS, go to System / System Settings and expand section “Domain Name Service (DNS)” In addition to the 2 IBM DNS (10.227.89.134 and 10.241.183.130), add 2 Enterprise DNS for ME: • 10.99.124.6 • 10.99.124.7 You should get the following list:</p> <p>image Click the “Save” button and check the job completion.</p> <p><strong>- Change user group permissions</strong> On PAS, go to System / User Groups. Select the “BMLS-PureApp-ICOProjectUsers” and change the “Cloud group administration / System level administration” permission from “View all cloud resources (Read-only)” to “Manage cloud resources (Full permission)” as follows:</p> <p>image</p> <p><strong>- Allow the Open PaaS VAs to communicate to the vCenter on opposite site</strong> Assign a SR for network team to update Enterprise_TO_IBM ACL in ME region OOB switches. Traffic from the management interface of VA to be allowed towards other DC vCenter (If the VA is in ME PA, traffic to be allowed toward ME BA vCenter and vise versa). Share the newly build VA IPs and vCenter IPs with network team upon completion of the build. Any action may not be required if Enterprise_TO_IBM ACL is already allowing the traffic. Network team should provide the evidence of existing ACL entry before resolving the SR.</p> <h5 id=4315-update-admin-root-passwords>4.3.15 Update admin &amp; root passwords<a class=headerlink href=#4315-update-admin-root-passwords title="Permanent link">&para;</a></h5> <p>From Box, lock then download the file named “BMLS &amp; PAS &amp; VMCG passwords.xls”.</p> <p>Add a new line by copying/placing line number 69. Replace Region, Site, Environment, Pure Name, Pure Type, Pure IP and VLAN based on PAS information. The cells “admin password” and “root password” are updated based on your inputs. Save the file, upload it on the Box, then unlock it.</p> <p><strong>- Admin password</strong> Login to PAS UI with userid “admin” and default password. Go on menu System, choice Users. Click on “admin” userid. Click on “edit” link:</p> <p>image</p> <p>Then replace the password from the one on Excel file:</p> <p>image</p> <p><strong>- Root password</strong> Start SSH (thru Putty) to your PAS IP. Login to PAS UI with userid “root” and default password. Enter “passwd” command to set the new password from the one on Excel file.</p> <h5 id=4316-validate-installation>4.3.16 Validate Installation<a class=headerlink href=#4316-validate-installation title="Permanent link">&para;</a></h5> <p>Now, log off the PSM, then log on again with your cloudfabric userid to validate security configuration.</p> <p>image </p> <p>On a well configured PAS there are three security settings should be configured: 1. LDAPs should be configured as follows (Go to ‘System’ &gt; ‘System Security’ &gt; LDAP settings) :</p> <p>image</p> <ol> <li> <p>User Groups (Go to ‘System’ &gt; ‘User Groups’) The following User Groups should exist: • BMLS-PureApp-ICOProjectUsers • BMLS-PureApp-Administrators (except in NE) • BMLS-PureApp-AdministratorsNE (only in NE) • BMLS-PureApp-SuperAdminNE (only in NE) IBM Cloud Integration Expert Labs Page 97/106 • BMLS-PureApp-ICO-PIF • PUREAPP-RO • Everyone</p> </li> <li> <p>Users (Go to ‘System’ &gt; ‘User’) Ensure the following users exists: • ICO_BMLS_CTU • KPI_BMLS_USER • JMP_PAS_PDT • Several Enterprise users (see sections 2.11.x)</p> </li> </ol> <p>Finally, register the PAS creation as an event in the BMLS Tool @ Enterprise. For this go to the ‘BMLS Tool @ sre’ : <a href=http://10.227.94.138/html/index.html>http://10.227.94.138/html/index.html</a> On the navigation bar, go to Event log &gt; Register a new Events:</p> <p>image</p> <p>Select the PAS and Submit. </p> <h5 id=4317-mail-to-security-teams>4.3.17 Mail to Security teams<a class=headerlink href=#4317-mail-to-security-teams title="Permanent link">&para;</a></h5> <p>Last action is to contact the CyberArk and Linux teams to hand over the PAS root account. For that, create a copy of Excel file named “CyberArk configuration - tempate_Enterprise-PUAMTemplateforOnboarding_Accounts.xlsx” then send this Excel file to </p> <p><a href=mailto:sre_linux@wwpdl.vnet.ibm.com>&#115;&#114;&#101;&#95;&#108;&#105;&#110;&#117;&#120;&#64;&#119;&#119;&#112;&#100;&#108;&#46;&#118;&#110;&#101;&#116;&#46;&#105;&#98;&#109;&#46;&#99;&#111;&#109;</a> and <a href=mailto:sre-puam@wwpdl.vnet.ibm.com>&#115;&#114;&#101;&#45;&#112;&#117;&#97;&#109;&#64;&#119;&#119;&#112;&#100;&#108;&#46;&#118;&#110;&#101;&#116;&#46;&#105;&#98;&#109;&#46;&#99;&#111;&#109;</a> asking them to define OS Security IDs then to manage on CyberArk.</p> <h5 id=4318-environment-profile-ip-groups-and-catalog-content>4.3.18 Environment Profile, IP Groups and Catalog Content<a class=headerlink href=#4318-environment-profile-ip-groups-and-catalog-content title="Permanent link">&para;</a></h5> <p>After PAS installation, the configuration steps require to create one Environment Profile, define IP Groups and load Catalog items (plugins, storehouse files, OS images and patterns).</p> <p><strong>- Environment Profile</strong> The same Environment Profile is created on all PAS. From the main menu, select Tools / Script Launcher:</p> <p>image</p> <p>In the script database, look for the Configure PAS Network script:</p> <p>image</p> <p>Make sure you select the right script (executable is configure.cmd). Click Execute in the Actions column to execute this script:</p> <p>image</p> <p>In the Parameter: Target Environment section, click the Select button:</p> <p>image</p> <p>Use the filtering fields in the Instance Selector dialog box to search for your target environment:</p> <p>image </p> <p>Click on the checkbox on the Select column to select the target environment for the script:</p> <p>image </p> <p>The parameter value displays the unique ID of the selected environment once the dialog box closes.</p> <p>(Make sure an environment is selected before going next) In the Parameter: JSON configuration file section, click the Browse button to make the File selection dialog box open:</p> <p>image</p> <p>Select the file /config/generic/createEnvironmentProfile.json using the tree-like structure. The relative path of the selected file is shown on the File area:</p> <p>image</p> <p>Click Ok once the right file is selected. The absolute, server-side path of the selected file is shown in the parameter area:</p> <p>image</p> <p>Click the Execute button to launch the script execution. A sub-process is created server-side to execute the script. A remote console opens on the browser to display the output of the script process:</p> <p>image </p> <p>You can immediate kill the process using the small, red bomb icon. Once the script execution completes, you can use the green, outdoor icon to return to the job execution result database:</p> <p>image</p> <p>By default, the table is filtered on the current user ID. Using the magnifier icon on the Actions column, you can retrieve the job console. The trash icon is used to delete the job execution result from the database</p> <p>From BMLS Team @ Enterprise Tooling, menu “Enterprise Environments”, select “Tools”:</p> <p>image image </p> <p><strong>- IP Groups</strong></p> <p>See KT document named “MassLoad IPGroups on Production VMCGs - v1.0.pdf”.</p> <ul> <li>Additional actions for OpenPaaS</li> </ul> <p>For OpenPaaS, you need to prepopulate the IP Groups with all the IP addresses that are potentially usable by Enterprise. These IP Groups contain “OPAA” in their name. Make sure the Enterprise DNS are already configured in the PAS System Settings (see section 4.3.14 for "Add Enterprise DNS to PAS System Settings")</p> <p>For each of them, in Cloud / IP Groups, section “IP addresses”, assuming this section is empty: 1. Write down the subnet address and the gateway of the IP Group 2. Click the “+” button 3. Select “IP Range” and type the 1<sup>st</sup> IP address of the subnet (i.e. subnet address + 1) and the last IP address before the gateway (i.e. gateway address – 1). See screenshot below as an example</p> <p>image </p> <ol> <li>Do the same with all “OPAA” IP groups.</li> </ol> <p><strong>- Catalog Content</strong></p> <p>See KT document named “Catalog Content Upload on Production PAS - v1.0.1.pdf”</p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <b>SPN</b> <div class="md-footer-meta md-typeset"> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["content.code.annotate", "content.tooltips", "navigation.indexes", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.85cb4492.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.431f3d41.min.js></script> <script src=../../../overrides/assets/javascripts/bundle.1ff6d521.min.js></script> </script> <script>
      window.watsonAssistantChatOptions = {
        integrationID: "2c965e33-9bb7-479b-8fe5-992ec47ab105", // The ID of this integration.
        region: "us-east", // The region your integration is hosted in.
        serviceInstanceID: "6b183879-c8c9-4af3-bede-b0a83705f20b", // The ID of your service instance.
        onLoad: function(instance) { instance.render(); }
      };
      setTimeout(function(){
        const t=document.createElement('script');
        t.src="https://web-chat.global.assistant.watson.appdomain.cloud/versions/" + (window.watsonAssistantChatOptions.clientVersion || 'latest') + "/WatsonAssistantChatEntry.js";
        document.head.appendChild(t);
      });
    </script> </body> </html>